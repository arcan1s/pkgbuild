# Maintainer: Evgeniy "arcanis" Alekseev <arcanis.arch at gmail dot com>

pkgname=istodo
_pkgname=iStodo
pkgver=1.1
pkgrel=2
pkgdesc="Crossplatform Qt5 based organizer for students"
arch=('i686' 'x86_64')
url="http://istodo.ru/"
license=('custom')
options=('!strip')
depends=('hicolor-icon-theme' 'libsm' 'mesa')
makedepends=('desktop-file-utils')
install=${pkgname}.install

if [ "${CARCH}" == "x86_64" ]; then
  _filearch=x86_64
    md5sums=('47daa77b728d1f8c5ecc1bd4d5ee66d4')
else
  _filearch=x86
  md5sums=('2b60097a7dd221810c86ac0f2e269c93')
fi
source=(${pkgname}-${pkgver}.tar.gz::http://istodo.ru/distribs/${_pkgname}-linux-${_filearch}-${pkgver}.tar.gz)

package() {
  cd "${srcdir}/${_pkgname}-linux-${_filearch}-${pkgver}"

  install -Dm755 iStodo.bin "${pkgdir}/usr/bin/istodo"
  install -Dm644 iStodo.desktop "${pkgdir}/usr/share/applications/iStodo.desktop"
  for _size in 32x32 48x48 64x64 128x128 256x256; do
    install -Dm644 icons/${_size}/iStodo.png "${pkgdir}/usr/share/icons/hicolor/${_size}/iStodo.png"
  done
  
  install -Dm644 license.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
