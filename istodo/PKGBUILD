# Maintainer: Evgeniy "arcanis" Alekseev <arcanis.arch at gmail dot com>

pkgname=istodo
pkgver=1.2
pkgrel=1
pkgdesc="Crossplatform Qt5 based organizer for students"
arch=('i686' 'x86_64')
url="http://istodo.ru/"
license=('custom')
options=('!strip')
depends=('hicolor-icon-theme' 'libsm' 'mesa')
makedepends=('desktop-file-utils')
install=${pkgname}.install

if [ "${CARCH}" == "x86_64" ]; then
  _filearch=amd64
  md5sums=('1f58521c2ddb9195a26a0bb3713a52a6')
else
  _filearch=i386
  md5sums=('ef5a8809b6bff8c9bcf5a28e860a606b')
fi
source=(${pkgname}-${pkgver}.tar.gz::http://istodo.ru/distribs/${pkgname}-linux-${pkgver}-${_filearch}.tar.gz)

package() {
  cd "${srcdir}/${pkgname}-linux-${pkgver}-${_filearch}"

  install -Dm755 istodo "${pkgdir}/usr/bin/istodo"
  install -Dm644 istodo.desktop "${pkgdir}/usr/share/applications/istodo.desktop"
  for _size in 32x32 48x48 64x64 128x128 256x256; do
    install -Dm644 icons/${_size}/istodo.png "${pkgdir}/usr/share/icons/hicolor/${_size}/istodo.png"
  done
  
  install -Dm644 license.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
}
